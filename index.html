<!DOCTYPE HTML>
<html>
<head>
	<meta http-equiv="content-type" content="text/html" />
	<meta name="author" content="Olga Zhilkova" />
    <link href="css\new_boot.css" rel="stylesheet" type="text/css" />
    <link href="css\responsive_table.css" rel="stylesheet" type="text/css" />
    <link href="css\style.css" rel="stylesheet" type="text/css" />
    <script src="js\jquery-3.2.1.min.js"></script>
    <script src="js\handlebars-v4.0.14.js"></script>
    <script src="js\multilevel_structure.js"></script>
	<title>Origin html structure for visual</title>
</head>
<body>
  	<div class="thoughtful">
                	<table id="WBS">
                  		<caption>
                         The table shows all deliverables for project in the tree
                  		</caption>
                  		<thead>
	                		<tr>
	                		    <td></td>
	                		    <th>Level</th>
	                		    <th>Title</th>
	                		    <th>Duration</th>
	                		    <th>Cost (AU)</th>
	                		</tr>
                  		</thead>
                  <tbody>
                  </tbody>
                </table>
    </div>
<script id="deliverable-template" type="text/x-handlebars-template">
      <tr>
        <th class="actions">
          <ul>
            {{#each actions}}
              <li>{{action_button}}
            {{/each}}
        </th>

        <td class="level" data-id="1"></td>
        <td class="title"></td>
        <td class="time"></td>
        <td class="cost"></td>
      </tr>

</script>
<script>
$(document).ready(function(){
  
  let context = {
      actions: [
        {type: "create", style: "new"}, 
        {type: "modify", style: "edit"}, 
        {type: "discard", style: "delete"}, 
        {type: "save", style: "save"}, 
        {type: "moveUp", style: "move_up"}, 
        {type: "moveDown", style: "move_down"}, 
        {type: "encreaseLevel", style: "level_up"}, 
        {type: 'decreaseLevel', style: "level_down"},
        {type: 'breakdown', style: "tree_open"}
       ],
       fields: ["title","period","cost"],
       deliverables: {
         0: {
           levelID: '1',
           fields: {
             
           }
         }
       } 
    };

    Handlebars.registerHelper('action_button', function() {
      
      //return  <button class="{{style}}" name="create" {{#if restricted}}readonly="readonly"{{/if}} type="button" form="delivery"></button> 
      let type = Handlebars.escapeExpression(this.type),
        style = Handlebars.escapeExpression(this.style);
      
      return new Handlebars.SafeString(
        "<button class='" + style + "' name='" + type + "'><span>" + type + "</span></button>"
      );
      
    });
    
    //<input type="text" {{#if saved}}readonly="readonly"{{/if}} readonly="readonly" value="{{cost}}">
    
  var source   = document.getElementById("deliverable-template").innerHTML;
  var template = Handlebars.compile(source);
  $('#WBS tbody').html(template(context));
  //managerEntries.init({'elementID': '#WBS'});

  //var carousel = new myPrimeBanner().init({selector: ".carousel"});
});
</script>

<form id="deliverable" name="deliverable" method="GET" action="">
    <input type="hidden" value="" name="id" />
</form>
</body>
</html>